var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.findInternal=function(a,b,d){a instanceof String&&(a=String(a));for(var c=a.length,e=0;e<c;e++){var f=a[e];if(b.call(d,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};
$jscomp.polyfill=function(a,b,d,c){if(b){d=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var e=a[c];e in d||(d[e]={});d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6-impl","es3");$jscomp.array=$jscomp.array||{};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var d=0,c={next:function(){if(d<a.length){var e=d++;return{value:b(e,a[e]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
var mediaQuery=window.matchMedia("(prefers-reduced-motion: reduce)"),touch=!1,mot=mediaQuery.matches?0:1,cur=1,per=.501,currentLoc="",scoreMeterVal=[0,0],lsVersion=.3,getQs=$.getJSON("js/questions.json",function(){}).done(function(){questList=JSON.parse(getQs.responseText).questions}).fail(function(a,b,d){console.error("getJSON for questions.json failed, status: "+b+", error: "+d)});
$(document).ready(function(){localStorage.getItem("motion")?mot=parseInt(localStorage.getItem("motion")):localStorage.setItem("motion",mot);localStorage.getItem("cursor")?cur=parseInt(localStorage.getItem("cursor")):localStorage.setItem("cursor",cur);localStorage.getItem("perspective")?per=parseInt(localStorage.getItem("perspective")):localStorage.setItem("perspective",per);$("body").on("click","a",function(a){a.preventDefault();changePage($(this).attr("href"));a.target.blur()});$("body").on("click",
"button",function(a){a.target.blur()});touch=detectTouch();$("body").on("mouseenter","input, textarea",function(){$("#cursor").addClass("inputHover")}).on("mouseenter","a, button",function(a){$("#cursor").addClass("hover");$(a.target).attr("href")&&($(a.target).attr("href").indexOf("http")||$("#cursor").addClass("link"))}).on("mouseleave","a, button, input, textarea",function(){$("#cursor").removeClass("link hover mousedown mouseRefuse inputHover")}).on("mousedown","a, button, input, textarea",function(a){$(a.target).hasClass("active")||
$(a.target).parents("a").hasClass("active")?$("#cursor").addClass("mouseRefuse"):$("#cursor").addClass("mousedown")}).on("mouseup","a, button, input, textarea",function(){$("#cursor").removeClass("mousedown mouseRefuse")});$("header, footer").on("mouseenter",function(){cur&&mot&&$("#cursor").addClass("noTransform")}).on("mouseleave",function(){cur&&mot&&$("#cursor").removeClass("noTransform")});$("main").on("mouseenter",".select",function(){$(this).focus()}).on("focusin",".select",function(){openAns($(this))}).on("mouseleave focusout",
".select",function(){closeAns($(this))});$("main").on("keydown",".select",function(a){a.stopPropagation();console.log(a.which);var b=$(this);switch(a.which){case 38:case 87:openAns(b);b.find(".answer").removeClass("selected");b.find(".topAns").addClass("selected");break;case 40:case 83:openAns(b);b.find(".answer").removeClass("selected");b.find(".botAns").addClass("selected");break;case 27:b.find(".answer").removeClass("selected");closeAns(b);break;case 13:case 32:a.preventDefault();b.hasClass("open")&&
b.find(".selected").length?(closeAns(b),b.nextAll(".select, .qBtn").eq(0).focus()):openAns(b);break;case 39:case 68:a.preventDefault();b.nextAll(".select").length&&(b.hasClass("open")&&closeAns(b),b.nextAll(".select").eq(0).focus().addClass("open"));break;case 37:case 65:a.preventDefault(),b.prevAll(".select").length&&(b.hasClass("open")&&closeAns(b),b.prevAll(".select").eq(0).focus().addClass("open"))}}).on("focusout keyup",".select",function(a){13===a.which&&a.preventDefault()});$("main").on("mouseenter",
".answer",function(){$(this).siblings(".answer").removeClass("selected");$(this).addClass("selected");$(this).parents(".select").addClass("selectionMade")}).on("mouseup",".answer",function(){$(this).addClass("selected");closeAns($(this).parents(".select"))}).on("mousemove",".answer",function(a){if(mot){var b=$(a.target),d=b.parents(".select"),c=a.pageX;a=a.pageY;var e=d.offset().left,f=d.offset().top,g=d.outerWidth(),d=b.hasClass("topAns")?0:64,e=e+g/2,f=f+d+16,c=Math.abs(c-e)/(c-e)*Math.pow(Math.abs(c-
e),.5);a=Math.abs(a-f)/(a-f)*Math.pow(Math.abs(a-f),.5);b.css({"-webkit-transform":"translate("+per*c+"px,"+per*a+"px)","-moz-transform":"translate("+per*c+"px,"+per*a+"px)","-ms-transform":"translate("+per*c+"px,"+per*a+"px)",transform:"translate("+per*c+"px,"+per*a+"px)"})}}).on("mouseleave",".answer",function(){mot&&$(".answer").css({"-webkit-transform":"translate(0px,0px)","-moz-transform":"translate(0px,0px)","-ms-transform":"translate(0px,0px)",transform:"translate(0px,0px)"})});$("main").on("mouseup",
".blank",function(){$(this).parents(".select").removeClass("selectionMade");$(this).siblings(".answer").removeClass("selected")});touch?($("body").addClass("touch"),$("main").off(),$("body").off(),$(".touch").on("touchstart",".open .answer",function(){$(this).siblings(".answer").removeClass("selected");$(this).addClass("selected")}),$(".touch").on("touchend",".select",function(){$(this).hasClass("open")?closeAns($(this)):openAns($(this))})):$(document).bind("mousemove",function(a){if(mot||cur){var b,
d,c;b=$(window).width();d=$(window).height();c=a.pageX;a=a.pageY;cur&&$("#cursor").css({left:c-3,top:a-3});mot&&(b=-(5-c/b*10),d=5-a/d*10,c=Math.abs(b)/b*Math.pow(Math.abs(b),2/3),a=$("body").hasClass("status-meh")?"rgba(82, 0, 210, 0.15)":$("body").hasClass("status-de")?"rgba(0, 183, 226, 0.15)":"rgba(255, 0, 98, 0.15)",b=String(-10*b+"px "+10*d+"px 180px -60px "+a+" inset"),$("main").css({"-webkit-transform":"rotateX("+per*(d-2)+"deg) rotateY("+per*c+"deg) translate("+9*per*c+"px,"+(-9*per*d+10)+
"px)","-moz-transform":"rotateX("+per*(d-2)+"deg) rotateY("+per*c+"deg) translate("+9*per*c+"px,"+(-9*per*d+10)+"px)","-ms-transform":"rotateX("+per*(d-2)+"deg) rotateY("+per*c+"deg) translate("+9*per*c+"px,"+(-9*per*d+10)+"px)",transform:"rotateX("+per*(d-2)+"deg) rotateY("+per*c+"deg translate("+9*per*c+"px,"+(-9*per*d+10)+"px)"}),$("body").css({"box-shadow":b}),cur&&$("#cursor").css({"-webkit-transform":"rotateX("+d+"deg) rotateY("+c+"deg)","-moz-transform":"rotateX("+d+"deg) rotateY("+c+"deg)",
"-ms-transform":"rotateX("+d+"deg) rotateY("+c+"deg)",transform:"rotateX("+d+"deg) rotateY("+c+"deg)"}))}});$("main").on("click","#scoreMeter+button",function(){localStorage.removeItem("Qprogress");storageSetup();scoreMeter()}).on("click","#motionToggle",function(){mot?($("body").addClass("noMotion"),localStorage.setItem("motion",0),mot=0,$("main, #cursor").css({"-webkit-transform":"none","-moz-transform":"none","-ms-transform":"none",transform:"none"}),$("#motionToggle").html("Turn on motion"),$("#perspectiveSetting").prop("disabled",
!0)):($("body").removeClass("noMotion"),localStorage.setItem("motion",1),mot=1,$("#motionToggle").html("Turn off motion"),$("#perspectiveSetting").prop("disabled",!1),perspectiveSet($("#perspectiveSetting"),per))}).on("click","#cursorToggle",function(){cur?(localStorage.setItem("cursor",0),cur=0,$("body").removeClass("custCursOn"),$("#cursorToggle").html("Turn on cursor")):(localStorage.setItem("cursor",1),cur=1,$("body").addClass("custCursOn"),$("#cursorToggle").html("Turn off cursor"))}).on("mousedown",
"#perspectiveSetting",function(a){$("#cursor").addClass("hidden");var b=$(a.target);b.addClass("clicked");$("#perspectiveSetting").on("mousemove",function(a){a=xAlongElem(a);perspectiveSet(b,1.15*a-.06)})}).on("mouseup mouseleave","#perspectiveSetting",function(a){$("#perspectiveSetting").off("mousemove");$("#cursor").removeClass("hidden");if($("#perspectiveSetting").hasClass("clicked")){$(a.target).removeClass("clicked");var b=xAlongElem(a),b=Math.min(Math.max(3800*Math.pow(1.1*(1-b)-.05,3)+200,
200),4E3);$("body").animate({perspective:parseInt(b)},300,"swing")}$(a.target).removeClass("clicked");$(a.target).blur()}).on("focusin","#perspectiveSetting",function(a){}).on("keydown","#perspectiveSetting",function(a){var b=0;switch(a.which){case 37:case 40:b=-5;a.preventDefault();break;case 38:case 39:b=5,a.preventDefault()}perspectiveSet($(this),per,b)}).on("keyup","#perspectiveSetting",function(a){a.preventDefault();a.stopPropagation()});cur&&!touch||$("body").removeClass("custCursOn");mot||
$("body").addClass("noMotion");storageSetup();calcScore(JSON.parse(localStorage.getItem("Qprogress")));changePage(localStorage.getItem("page")||"home")});function applyTouch(){$("#cursor").hide();localStorage.setItem("cursor",0);cur=0;localStorage.setItem("motion",0);mot=0}function detectTouch(){try{return document.createEvent("TouchEvent"),!0}catch(a){return!1}}
function storageSetup(){var a=JSON.parse(localStorage.getItem("Qprogress")),b={ver:lsVersion,QIDs:[],ans:[],curScore:0};null==a?localStorage.setItem("Qprogress",JSON.stringify(b)):a.ver!=lsVersion&&localStorage.setItem("Qprogress",JSON.stringify(b))}function openAns(a){a.addClass("open");touch||$("#cursor").addClass("hidden")}
function closeAns(a){a.removeClass("open");$("#cursor").removeClass("hidden");a.find(".selected").length?(a.addClass("selectionMade"),$(".card").find(".select").length===$(".card").find(".selectionMade").length&&$(".qBtn").prop("disabled",!1)):(a.removeClass("selectionMade"),$(".qBtn").prop("disabled",!0))}
function animateValue(a,b,d,c){function e(){var a=(new Date).getTime(),a=Math.round(d-Math.max((h-a)/c,0)*g);f.text(a);a==d&&clearInterval(k)}var f=$("#"+a),g=d-b;a=Math.abs(Math.floor(c/g));a=Math.max(a,50);var h=(new Date).getTime()+c,k;k=setInterval(e,a);e()}
function calcScore(a,b){a=void 0===a?JSON.parse(localStorage.getItem("Qprogress")):a;b=void 0===b?function(){}:b;for(var d=0,c=a.ans.length,e=$jscomp.makeIterator(a.ans),f=e.next();!f.done;f=e.next())for(var f=$jscomp.makeIterator(f.value),g=f.next();!g.done;g=f.next())d+="pre"==g.value?1:-1;c=d/Math.max(c+1,6);$("body").removeClass("status-meh status-pre status-de").addClass(.2>Math.abs(c)?"status-meh":0<d?"status-pre":"status-de");a.curScore=c;localStorage.setItem("Qprogress",JSON.stringify(a));
b();return c}
function scoreMeter(){var a=JSON.parse(localStorage.getItem("Qprogress")),b=a.QIDs.length,d=$("#scoreMeter+button");b?d.removeClass("inactive").prop("disabled",!1):d.addClass("inactive").prop("disabled",!0);var c=calcScore(a);for(i=0;i<a.QIDs.length;i++);var e=Math.max(Math.abs(2E3*(c-scoreMeterVal[0])),1E3);setTimeout(function(){$("#indicator").css("margin-left",50*scoreMeterVal[0]+"%").show().animate({"margin-left":50*c+"%"},e,"easeInOutCubic").addClass("set");animateValue("qNum",parseInt($("#qNum").html()),Object.keys(questList).length,
e);animateValue("indicatorVal",scoreMeterVal[1],b,e);scoreMeterVal=[c,b]},300)}var xAlongElem=function(a){var b=a.pageX,d=$(a.target).offset().left;a=$(a.target).outerWidth();return(b-d)/a};
function perspectiveSet(a,b,d){b=void 0===b?localStorage.getItem("perspective")||per:b;d=void 0===d?0:d;var c=a.outerWidth();b=Math.min(Math.max(b+d/100,0),1);c=-(c*(1-(.9*b+.1)));per=parseFloat(Math.max(Math.min(b,1),0).toFixed(2));a.html("Intensity: "+parseInt(100*per)+"%").css({"box-shadow":c+"px 0 0 0 black inset"});localStorage.setItem("perspective",per)}
function nextQ(a,b){a=void 0===a?!0:a;b=void 0===b?!1:b;var d=JSON.parse(localStorage.getItem("Qprogress"));b&&($("a").removeClass("active"),$("main").removeClass("home"),$("main").addClass("quiz"));var c=Math.floor(Math.random()*Object.keys(questList).length+1);if(-1!==$.inArray(c,d.QIDs))d.QIDs.length>=Object.keys(questList).length?changePage("score"):nextQ();else{var e=$("main .content").eq(0),f=Object.keys(questList).length==d.QIDs.length+1,g=[Math.floor(2*Math.random()),Math.floor(2*Math.random())],
h=2*Math.floor(1E3*Math.random()),c="q"+c;questList[c].text3?e.after('<div class="content"><div class="card" id="q-'+questList[c].ID+'"><p class="qInfo">'+(f?"Last Question":"Question "+(d.QIDs.length+1))+"</p><span>"+questList[c].text1+'</span><div class="select" tabindex="0"><div name="'+("a-"+(h+g[0]))+'" class="answer topAns">'+questList[c].option1[g[0]?"pre":"de"]+'</div><div class="blank">\u00d7</div><div name="'+("a-"+(h+g[0]))+'" class="answer botAns">'+questList[c].option1[g[0]?"de":"pre"]+
"</div></div><span>"+questList[c].text2+'</span><div class="select" tabindex="0"><div name="'+("a-"+(h+g[1]))+'" class="answer topAns">'+questList[c].option2[g[1]?"pre":"de"]+'</div><div class="blank">\u00d7</div><div name="'+("a-"+(h+g[1]))+'" class="answer botAns">'+questList[c].option2[g[1]?"de":"pre"]+"</div></div><span>"+questList[c].text3+'</span><button disabled class="qBtn full-width" onclick="recordQ()">'+(f?"See Your Score":"Next")+'</button><p class="qRule"><a target="_blank" href="'+questList[c].rule+
'">More Info</a></p></div></div>'):e.after('<div class="content"><div class="card" id="q-'+questList[c].ID+'"><p class="qInfo">'+(f?"Last Question":"Question "+(d.QIDs.length+1))+"</p><span>"+questList[c].text1+'</span><div class="select" tabindex="0"><div name="'+("a-"+(h+g[0]))+'" class="answer topAns">'+questList[c].option1[g[0]?"pre":"de"]+'</div><div class="blank">\u00d7</div><div name="'+("a-"+(h+g[0]))+'" class="answer botAns">'+questList[c].option1[g[0]?"de":"pre"]+"</div></div><span>"+questList[c].text2+
'</span><button class="qBtn full-width" onclick="recordQ()">'+(f?"See Your Score":"Next")+'</button><p class="qRule"><a target="_blank" href="'+questList[c].rule+'">More Info</a></p></div></div>');if(a){var k=$("main .content");mot?k.animate({left:"-100%"},500,"easeInOutBack"):k.fadeOut(500);setTimeout(function(){e.remove();mot?k.css("left","0%"):k.fadeIn(500)},550)}}}
function recordQ(){var a=JSON.parse(localStorage.getItem("Qprogress")),b=$(".selected"),d=b.parents(".card").attr("id"),c=[];b.each(function(a,b){var d=$(b).attr("name"),d=d.slice(2,d.length)%2;$(b).hasClass("topAns")?c.push(d?"pre":"de"):c.push(d?"de":"pre")});a.QIDs.push(parseInt(d.slice(2,d.length)));a.ans.push(c);calcScore(a,function(){nextQ()})}
function targetId(a){a=(void 0===a?"#":a).split("#");var b=2<a.length?a.slice(1).join(""):a[1]||a[0];setTimeout(function(){var a=$("#"+b).offset().top;$("main").animate({scrollTop:a-100},800,"swing",function(){$("#motionToggle").focus()})},300)}
var changePage=function(a,b){a=void 0===a?"home":a;b=void 0===b?!0:b;var d=$("main"),c=$jscomp.makeIterator(a.split("#")),e=c.next().value,c=c.next().value,f=void 0===c?0:c;if(-1<a.indexOf("http"))window.open(a,"_blank");else if(!d.hasClass(e)){b&&window.history.pushState({},a,"home"===a?"/":a);$("a[href="+e+"]").hasClass("active")||($("a").removeClass("active"),$("a[href="+e+"]").addClass("active"));ctn=0<d.find(".content").length;var g="home"==e?-1:1;d.animate({top:-g*mot*200,opacity:0},ctn?500:
0,"easeInCubic",function(){d.animate({top:g*mot*200},50,function(){d.load(e+".html",function(a,b){"error"==b?d.load("404.html",function(a,b){"error"==b&&$("main").html("<p>Something went really wrong here. Try refreshing or clearing your localStorage.</p>");d.removeClass();d.addClass("fourOhfour")}):(d.removeClass(),d.addClass(e),localStorage.setItem("page",e),f&&targetId(f));d.animate({top:0,opacity:1},500,"easeOutCubic")})})})}};
